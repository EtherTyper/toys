================================================================================
                Stream VByte: differential encoding
================================================================================

Introduction
-----------------------------------------------------------

`Stream VByte data format`__ allows to compress sequences of integers;
the encoding and decoding are SIMD-oriented and thus fast. Each number
can be saved on 1, 2, 3 or 4 bytes depending on its value. The sequence
is saved in two streams: 1) the control stream, where each byte encodes
size of four numbers, 2) the data stream, that stores encoded numbers.

__ https://arxiv.org/abs/1709.08990


Although the ordered of numbers is not predefined by the format, I was
wondering if **sorting** numbers and then **save differences** might
help. This would affect on the data stream size, the size of control
stream is constant for given input size.


Experiment
-----------------------------------------------------------

Setup:

* number of integers: 1024 * 100;
* input arrays are initialized with random numbers from
  range [0, 2^n - 1], where **n** varies from 1 to 32. 


+------+--------------+---------------+-------------+
| n    | raw size [B] | diff size [B] | improvement |
+------+--------------+---------------+-------------+
| 1..8 | 128000       | 128000        |     --      |
+------+--------------+---------------+-------------+
|    9 | 179131       | 128000        |  0.29       |
+------+--------------+---------------+-------------+
|   10 | 204657       | 128000        |  0.37       |
+------+--------------+---------------+-------------+
|   11 | 217516       | 128000        |  0.41       |
+------+--------------+---------------+-------------+
|   12 | 223939       | 128000        |  0.43       |
+------+--------------+---------------+-------------+
|   13 | 227211       | 128000        |  0.44       |
+------+--------------+---------------+-------------+
|   14 | 228800       | 128000        |  0.44       |
+------+--------------+---------------+-------------+
|   15 | 229610       | 128000        |  0.44       |
+------+--------------+---------------+-------------+
|   16 | 230022       | 128000        |  0.44       |
+------+--------------+---------------+-------------+
|   17 | 281344       | 128000        |  0.55       |
+------+--------------+---------------+-------------+
|   18 | 306974       | 128000        |  0.58       |
+------+--------------+---------------+-------------+
|   19 | 319873       | 128000        |  0.60       |
+------+--------------+---------------+-------------+
|   20 | 326316       | 128000        |  0.61       |
+------+--------------+---------------+-------------+
|   21 | 329604       | 128186        |  0.61       |
+------+--------------+---------------+-------------+
|   22 | 331194       | 141335        |  0.57       |
+------+--------------+---------------+-------------+
|   23 | 332007       | 191517        |  0.42       |
+------+--------------+---------------+-------------+
|   24 | 332420       | 222858        |  0.33       |
+------+--------------+---------------+-------------+
|   25 | 383744       | 229575        |  0.40       |
+------+--------------+---------------+-------------+
|   26 | 409374       | 230332        |  0.44       |
+------+--------------+---------------+-------------+
|   27 | 422273       | 230392        |  0.45       |
+------+--------------+---------------+-------------+
|   28 | 428716       | 230400        |  0.46       |
+------+--------------+---------------+-------------+
|   29 | 432004       | 230582        |  0.47       |
+------+--------------+---------------+-------------+
|   30 | 433594       | 243640        |  0.44       |
+------+--------------+---------------+-------------+
|   31 | 434407       | 293757        |  0.32       |
+------+--------------+---------------+-------------+
|   32 | 434820       | 325211        |  0.25       |
+------+--------------+---------------+-------------+

